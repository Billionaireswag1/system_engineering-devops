#!/usr/bin/env bash
# Display all unique users of running processes with only USER column

echo "USER"

for pid in /proc/[0-9]*; do
    pid=${pid##*/}  # get PID number
    if [[ ! "$pid" =~ ^[0-9]+$ ]]; then
        continue
    fi

    user=$(ps -o user= -p "$pid" 2>/dev/null)
    if [[ -n $user ]]; then
        echo "$user"
    fi
done | sort | uniq
