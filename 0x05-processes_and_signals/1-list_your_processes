#!/usr/bin/env bash
# Display all running processes for all users with only USER and COMMAND columns

echo "USER   COMMAND"

for pid in /proc/[0-9]*; do
    pid=${pid##*/}  # extract just the number
    if [[ ! "$pid" =~ ^[0-9]+$ ]]; then
        continue
    fi

    user=$(ps -o user= -p "$pid" 2>/dev/null)
    cmd=$(tr '\0' ' ' < "/proc/$pid/cmdline" 2>/dev/null)
    if [[ -n $user && -n $cmd ]]; then
        echo "$user $cmd"
    fi
done
